# 4ç« ï¼šã€ŒTypeScriptã§å‹ã‚’ã”å®‰å…¨ã«ã€ã®æŒ¯ã‚Šè¿”ã‚Šã¾ã¨ã‚

## 4-1. TypeScriptã¯ã‚¤ã‚±ã‚¤ã‚±ã®äººæ°—è¨€èªï¼Ÿ

#### 1. TypeScriptã¯ä¸–ç•Œä¸­ã§ã‚ã¡ã‚ƒãã¡ã‚ƒäººæ°—ãªè¨€èª

- ã„ã‚ã‚“ãªãƒ©ãƒ³ã‚­ãƒ³ã‚°ã§TypeScriptã¯ä¸Šä½ã«ã„ã‚‹

#### 1. TypeScriptãŒãƒ¡ã‚¸ãƒ£ãƒ¼ã«ãªã£ãŸç†ç”±ï¼ˆè‘—è€…ã®è€ƒãˆï¼‰

- ã€Œé™çš„å‹ä»˜ã‘ã€ã€Œå‹æ¨è«–ã€ã€ŒNull å®‰å…¨æ€§ã€ãŒã‚ã‚‹
- é–‹ç™ºå…ƒã¯å¤©ä¸‹ã® Microsoft
- æ„å¤–ã«å¤šã„ React + TypeScript ã®æ¡ç”¨ä¾‹

## 4-2. TypeScriptã®åŸºæœ¬çš„ãªå‹

#### 1. å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆType Annotationï¼‰

- `value: SomeType` ã¨ã„ã†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å®£è¨€æ™‚ã®å¤‰æ•°ã®å‹ã«æ³¨é‡ˆãŒä»˜ã‘ã‚‰ã‚Œã‚‹æ©Ÿèƒ½ã‚’ **å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³** ã¨ã„ã†

```typescript
let n: number = 3;
```

#### 2. å‹æ¨è«–ï¼ˆType Inferenceï¼‰

- æ–‡è„ˆã‹ã‚‰ãã®å‹ã‚’æ¨æ¸¬ã§ãã‚‹å ´åˆã¯å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çœç•¥ã—ã¦ã‚‚è‡ªå‹•çš„ã«è£œå®Œã—ã¦è§£é‡ˆã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ã‚’ **å‹æ¨è«–** ã¨ã„ã†

```typescript
const s = '123';
const n = 456;

// æ–‡å­—åˆ—ã®é€£çµã¨ã—ã¦è©•ä¾¡ã•ã‚Œã‚‹ãŸã‚å‹•ä½œã™ã‚‹
console.log(s + n); // '123456'
```

#### 3. TypeScriptã¨JavaScriptã§å…±é€šã®å‹

- ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã¯JavaScriptã¨åŒã˜

#### 4. ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ï¼ˆGenericsï¼‰

- `Array<string>` ãƒ»ãƒ»ãƒ» ã“ã‚“ãªå¥´

#### 5. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆInterfaceï¼‰

- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã«åå‰ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¦ãã‚ŒãŒ **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆInterfaceï¼‰** ã¨å‘¼ã¶
- readonly ä¿®é£¾å­
- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã®æœ«å°¾ã« `?` 

#### 6. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚·ã‚°ãƒãƒãƒ£ï¼ˆIndex Signatureï¼‰

- æ–‡å­—åˆ—ã¨æ•°å€¤ã®ï¼’ç¨®é¡ã®ã¿ä½¿ç”¨ã§ãã‚‹

```typescript
interface Status {
  level: number;
  maxHP: number;
  maxMP: number;
  [attr: string]: number; // ã‚³ã‚¤ãƒ„ã®ã“ã¨
}
```

#### 7. Enumå‹

- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æ•°å€¤ã§ã€ã‹å‹å®‰å…¨ãŒä¿è¨¼ã•ã‚Œã¦ã„ãªã„
- æ–‡å­—åˆ—enum ã‚’ä½¿ãˆã°å‹å®‰å…¨ãŒä¿è¨¼ã•ã‚Œã¦ã„ã‚‹æ›¸ãæ–¹ã«ãªã‚‹

```typescript
enum Pet { Cat, Dog, Rabbit }
```

#### 8. ãƒªãƒ†ãƒ©ãƒ«å‹

- ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã‚’åˆã‚ã›ã‚Œã° enumå‹ã¨åŒç­‰ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
- æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«å‹ã®æ–¹ãŒ enum ã‚ˆã‚Šã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã«è¨˜è¿°ã§ãã¦ä½¿ã„ã‚„ã™ã„ãŸã‚ã“ã¡ã‚‰ãŒä½¿ã‚ã‚Œã‚‹

```typescript
// æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ä¾‹
let Mary: 'Cat' | 'Dog' | 'Rabbit' = 'Cat';
```

#### 9. ã‚¿ãƒ—ãƒ«å‹

- å€‹ã€…ã®è¦ç´ ã®å‹ã¨ã€ãã®é †ç•ªã‚„è¦ç´ æ•°ã«æˆç´„ã‚’è¨­ã‘ã‚‰ã‚Œã‚‹ç‰¹æ®Šãªé…åˆ—ã®å‹

```typescript
cosnt charAttrs: [number, string, boolean] = [1, 'patty', true];
```

#### 10. Anyå‹

- ã„ã‹ãªã‚‹å‹ã®å€¤ã‚‚å—ã‘ã¤ã‘ã‚‰ã‚Œã‚‹å‹

#### 11. Unknownå‹

- any ã®å‹å®‰å…¨ç‰ˆ
- anyå‹ã¨åŒã˜æ©Ÿèƒ½ã«ã•ã‚‰ã«ãªã‚“ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚‚ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚æŒãŸãªã„å‹

#### 12. Neverå‹

- ä½•è€…ã‚‚ä»£å…¥ã§ããªã„å‹

## 4-3. é–¢æ•°ã¨ã‚¯ãƒ©ã‚¹ã®å‹

#### 1. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šnoImplicitAny

- å¼•æ•°ã®å‹å®šç¾©ãŒãªãã¦ã‚‚ any å‹ãŒå‰²ã‚ŠæŒ¯ã‚‰ã‚Œã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã£ã¦ã—ã¾ã†ã®ã‚’é˜²ã

#### 2. é–¢æ•°ã®å‹å®šç¾©

- å¼•æ•°ã¨æˆ»ã‚Šå€¤ã®å‹ã‚’åˆ¥ã€…ã«å®šç¾©ã™ã‚‹è¨˜æ³•

```typescript
// function ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹é–¢æ•°å¼
const add = function(n: number, m: number): number {
  return n + m;
};
console.log(add(5, 7)): // 12

// ã‚¢ãƒ­ãƒ¼é–¢æ•°å¼
const add2 = (n: number, m: number): number => n + b;

// ä½•ã‚‚è¿”ã•ãªã„é–¢æ•°ã®æˆ»ã‚Šå€¤å‹ã¯ void ã«ãªã‚‹
const hello = (): void => {
  console.log('Hello!');
};
console.log(add2(8, 1)): // 9
hello();                 // Hello!
```

- å¼•æ•°ã¨æˆ»ã‚Šå€¤ã‚’ã¾ã¨ã‚ã¦å®šç¾©ã™ã‚‹æ–¹æ³•

```typescript
/*
    ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã—ã¦å‘¼ã³å‡ºã—å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã—ã€
    ãã‚Œã‚’é–¢æ•°å¼ã«é©ç”¨ã—ãŸã‚‚ã®
 */
interface NumOp {
  (n: number, m: number): number;
}

const add: NumOp = function (n, m) {
  return n + m;
}
const subtract: NumOp = (n, m) => n - m;

console.log(add(1, 2)):      // 3
console.log(subtract(7, 2)): // 5

// ----------------------------------------
/*
    ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã—ã¦å‘¼ã³å‡ºã—å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã—ã€
    ãã‚Œã‚’ã‚¢ãƒ­ãƒ¼å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§è¡Œã£ã¦ã„ã‚‹
 */
const add2: (n: number, m: number) => number = function (n, m) {
  return n + m;
};
const subtract2: (n: number, m: number) => number = (n, m) => n - m;

console.log(add2(3, 7)):       // 10
console.log(subtract2(10, 8)): // 2
```

#### 3. å‹å¼•æ•°ï¼ˆType Parameterï¼‰

```typescript
const toArray = <T>(arg1: T, arg2: T): T[] => [arg1, arg2];
```

- ãƒ‡ãƒ¼ã‚¿ã®å‹ã«æŸç¸›ã•ã‚Œãªã„ã‚ˆã†å‹ã‚’æŠ½è±¡åŒ–ã—ã¦ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ€§ã‚’å‘ä¸Šã•ã›ã¤ã¤ã€é™çš„å‹ä»˜ã‘è¨€èªã®æŒã¤å‹å®‰å…¨æ€§ã‚’ç¶­æŒã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ‰‹æ³•ã‚’ **ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ˆGeneric Programmingï¼‰** ã¨å‘¼ã¶
- å‹å¼•æ•°ã‚’ç”¨ã„ã¦è¡¨ç¾ã™ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ã“ã¨ã‚’ **ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ï¼ˆGenericsï¼‰** ã¨ã„ã†

#### 4. TypeScriptã§ã®ã‚¯ãƒ©ã‚¹

- **ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åˆæœŸåŒ–å­ï¼ˆProperty Initializerï¼‰**
    - readonly ä¿®é£¾å­
    - ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«å¼•æ•°ãŒç„¡ã„ã‚¯ãƒ©ã‚¹ã§ã¯ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®åˆæœŸåŒ–ã‚’ã“ã‚Œã ã‘ã§æ¸ˆã¾ã›ã¦ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’çœç•¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
- **ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ï¼ˆAccess Modifierï¼‰**
    - public, protected, private
- **ç¶™æ‰¿ã‚ˆã‚Šã‚‚åˆæˆï¼ˆComposition over Inheritanceï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ«** ãŒå„ªå‹¢
    - ã©ã†ã—ã¦ åˆæˆ ã®æ–¹ãŒè‰¯ã‹ã£ãŸã‚“ã§ã—ãŸã£ã‘ï¼Ÿ

**ç¶™æ‰¿**

```typescript
class Rectangle {
  name = 'rectangle';
  sideA: number;
  sideB: number;

  constructor(sideA: number, sideB: number) {
    this.sideA = sideA;
    this.sideB = sideB;
  }

  getArea = (): number => this.sideA * this.sideB;
}

class Square extends Rectangle {
  readonly name = 'square';
  side: number;

  constructor(side: number) {
    super(side, side);
    this.name = 'square';
  }
}
```

**åˆæˆ**

```typescript
class Rectangle {
  readonly name = 'rectangle';
  sideA: number;
  sideB: number;

  constructor(sideA: number, sideB: number) {
    this.sideA = sideA;
    this.sideB = sideB;
  }

  getArea = (): number => this.sideA * this.sideB;
}

class Square {
  readonly name = 'square';
  side: number;

  constructor(side: number) {
    this.side = side;
  }

  getArea = (): number => new Rectangle(this.side, this.side).getArea();
}
```

#### 5. ã‚¯ãƒ©ã‚¹ã®å‹ã‚’æŠ½è±¡åŒ–ã—ã¦å®šç¾©ã™ã‚‹ï¼’ã¤æ–¹æ³•

- ï¼‘ã¤ç›®ï¼šabstract ä¿®é£¾å­ï¼ˆç©æ¥µçš„ã«ä½¿ç”¨ã™ã‚‹å¿…è¦ã¯ãªã„ï¼‰
- ï¼’ã¤ç›®ï¼š**ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**

```typescript
interface Shape {
  readonly name: string;
  getArea: () => number;
}

interface Quadrangle {
  side: number;
}

class Rectangle implements Shape, Quadrangle {
  readonly name = 'rectangle';
  side: number;
  sideB: number;

  constructor(side: number, sideB: number) {
    this.side = side;
    this.sideB = sideB;
  }

  getArea = (): number => this.side * this.sideB;
}
```

- ã‚¯ãƒ©ã‚¹ã¯ TypeScript ã«ã¨ã£ã¦ã€ **å‹ã§ã‚‚ã‚ã‚Šé–¢æ•°ã§ã‚‚ã‚ã‚‹ã¨ã„ã†äºŒé‡ã®å­˜åœ¨**
    - ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã™ã‚‹ã¨ã€å®Ÿéš›ã«ã¯ï¼’ã¤ã®å®£è¨€ãŒåŒæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆ**ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹å‹å®£è¨€**ã€**ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°ã®å®£è¨€**ï¼‰

```typescript
class Point {
  x: number = 0;
  y: number = 0;
}

const pointA = new Point();
const pointB: Point = { x: 2, y: 4 };

interface Point3d extends Point {
  z: number;
}

const pointC: Point3d = { x: 5, y: 5, z: 10 };
```

## 4-4. å‹ã®åå‰ã¨å‹åˆæˆ

#### 1. å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆType Aliasï¼‰

- ä»»æ„ã®å‹ã«åˆ¥åã‚’ä¸ãˆã¦å†åˆ©ç”¨ã§ãã‚‹ **å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆType Aliasï¼‰** ãŒã‚ã‚‹
    - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¹ã¯å‹ã®å®£è¨€ãªã®ã§ãã®å‹ã«ã¯æœ¬æ¥ã®åå‰ãŒä¸ãˆã‚‰ã‚Œã‚‹ï¼ˆæ§‹é€ ãŒæŠŠæ¡ã§ããªã„ï¼‰
    - å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯æ—¢ã«ç„¡åã§ä½œã‚‰ã‚Œã¦ã—ã¾ã£ãŸå‹ã«å‚ç…§ã®ãŸã‚ã®åˆ¥åã‚’ä¸ãˆã¦ã„ã‚‹ã‚‚ã®ï¼ˆæ§‹é€ ã¾ã§æŠŠæ¡ã§ãã‚‹ï¼‰

```typescript
type Unit = 'USD' | 'EUR' | 'JPY' | 'GBP';

type TCurrency = {
  unit: Unit;
  amount: number;
};

interface ICurrency {
  unit: Unit;
  amount: number;
}

const priceA: TCurrency = { unit: 'JPY', amount: 1000 };
const priceB: ICurrency = { unit: 'USD', amount: 10 };
```

#### 2. ãƒ¦ãƒ‹ã‚ªãƒ³å‹ï¼ˆUnion Typesã€å…±ç”¨ä½“å‹ï¼‰

- æ¼”ç®—å­ `|` ã§å‹ã‚’ä¸¦ã¹ã‚‹ã“ã¨ã§ã€ãã‚‰ã‚‰ã®å†…ã„ãšã‚Œã‹ã®å‹ãŒé©ç”¨ã•ã‚Œã‚‹è¤‡åˆçš„ãªå‹ã«ãªã‚‹

```typescript

type A = {
  foo: number;
  bar?: string;
};
type B = { foo: string };
type C = { bar: string };
type D = { baz: boolean };

type AorB = A | B; // { foo: number | string; bar?: string }
type AorC = A | C; // { foo: number; bar?: string} or { bar: string }
type AorD = A | D; // { foo: number; bar?: string} or { baz: boolean }
```

#### 3. ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³å‹ï¼ˆIntersection Typeã€äº¤å·®å‹ï¼‰

- æ¼”ç®—å­ `&` ã§ä¸¦ã¹ã¦ã„ãã‚“ã ã‘ã©ã€ãƒ¦ãƒ‹ã‚ªãƒ³å‹ãŒã€ŒAã¾ãŸã¯Bã€ã¨é©ç”¨ç¯„å›²ã‚’å¢—ã‚„ã—ã¦ãã®ã«å¯¾ã—ã¦ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¯ã‚·ãƒ§ãƒ³å‹ã¯ã€ŒAã‹ã¤Bã€ã¨è¤‡æ•°ã®å‹ã‚’ä¸€ã¤ã«çµåˆã•ã›ã‚‹ã‚‚ã®
    - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®åˆæˆã«ä½¿ã‚ã‚Œã‚‹

```typescript
type A = { foo: number };
type B = { bar: string };
type C = {
  foo?: number;
  baz: boolean;
};

type AnB = A & B;          // { foo: number, bar: string }
type AnC = A & C;          // { foo: number, baz: boolean }
type CnAorB = C & (A | B); // { foo: number, baz: boolean } or { foo?: number, bar: string, baz: boolean }
```

extends ã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æ‹¡å¼µã¨åŒç­‰ã®ã“ã¨ãŒã€ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³å‹ã‚’ä½¿ãˆã°ã§ãã‚‹â€¦â€¦ã¤ã¾ã‚Šã‚ã–ã‚ã–Interfaceã‚’ä½¿ã‚ãªãã¦ã‚‚ã„ã„ã‚ˆã­


```typescript
type Unit = 'USD' | 'EUR' | 'JPY' | 'GBP';
interface Currency {
  unit: Unit;
  amount: number;
}

interface IPayment extends Currency {
  date: Date;
}

type TPayment = Currency & {
  date: Date;
};

const date = new Date('2020-09-01T12:00+0900');
const payA: IPayment = { unit: 'JPY', amount: 10000, date };
const payB: TPayment = { unit: 'USD', amount: 100, date };
```

#### 4. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šstrictNullChecks

- null, undefined ã‚’å®£è¨€æ™‚ã«è¨­å®šã™ã‚‹ã“ã¨ãŒã§ããªããªã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```typescript
âŒï¼šconst foo: string = null;
âŒï¼šconst bar: number = undefined;
```

#### 5. æ˜ç¤ºçš„ã« null ã‚’è¨±å®¹ã—ãŸã„æ™‚ã¯ï¼Ÿ

- ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã§æ˜ç¤ºçš„ã«è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹

```typescript
let foo: string | null = 'fuu';
```

#### 6. é Null ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³æ¼”ç®—å­ï¼ˆNon-Null Assertion Operatorï¼‰

- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã€Œã“ã“ã¯çµ¶å¯¾ã« null ã‚‚ undefined ã‚‚å…¥ã‚Šã¾ã›ã‚“ã€ã¨å¼·å¼•ã«é»™ã‚‰ã›ã‚‹ã‚‚ã®

```typescript
// ! ã®éƒ¨åˆ†ãŒéNullã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³æ¼”ç®—å­
const getMomName = (resident: Resident): string => resident.mom!.lastName;
```

## 4-5. ã•ã‚‰ã«é«˜åº¦ãªå‹è¡¨ç¾

#### 1. typeof æ¼”ç®—å­

- é€šå¸¸ã®å¼ã§ã¯æ¸¡ã•ã‚ŒãŸå€¤ã®å‹ã®åå‰ã‚’æ–‡å­—åˆ—ã¨ã—ã¦è¿”ã™
- å‹ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ç”¨ã„ã‚‹ã¨å¤‰æ•°ã‹ã‚‰å‹ã‚’æŠ½å‡ºã—ã¦ãã‚Œã‚‹

```typescript
const arr = [1, 2, 3];
console.log(typeof arr); // 'object'

type NumArr = typeof arr;
const val: NumArr = [4, 5, 6];
```

#### 2. in æ¼”ç®—å­

- é€šå¸¸ã®å¼ã§ã¯æŒ‡å®šã—ãŸå€¤ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚­ãƒ¼ã¨ã—ã¦å­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã®çœŸå½å€¤ã‚’è¿”ã—ãŸã‚Šã€`for...in` æ–‡ã§ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã«ã‚­ãƒ¼ã‚’æŠ½å‡ºã™ã‚‹ã®ã«ä½¿ã‚ã‚Œã‚‹
- å‹ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ç”¨ã„ã‚‹ã¨åˆ—æŒ™ã•ã‚ŒãŸå‹ã®ä¸­ã‹ã‚‰å„è¦ç´ ã®å‹ã®å€¤ã‚’æŠœãå‡ºã—ã¦ **ãƒãƒƒãƒ—å‹ï¼ˆMapped Typeï¼‰** ã¨ã„ã†ã‚‚ã®ã‚’ä½œã‚‹

```typescript
const obj = { a: 1, b: 2, c: 3 };
console.log('a' in obj);                      // true
for (const key in obj) { console.log(key); }  // a b c

// enumå‹ã§ã‚‚ä½¿ç”¨ã§ãã‚‹
type Fig = 'one' | 'two' | 'three';
type FigMap = { [k in Fig]?: number };

const figMap: FigMap = {
  one: 1,
  two: 2,
  three: 3,
};
```

#### 3. keyof æ¼”ç®—å­

- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã‹ã‚‰ã‚­ãƒ¼ã‚’æŠœãå‡ºã—ã¦ãã‚‹ã‚‚ã®
- typeof æ¼”ç®—å­ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ã€æ—¢å­˜ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã‚­ãƒ¼ã®å‹ã‚’æŠ½å‡ºã§ãã‚‹

```typescript
const permissions = {
  r: 0b100,
  w: 0b010,
  x: 0b001,
};

type PermsChar = keyof typeof permissions; // 'r' | 'w' | 'x'
const readable: PermsChar = 'r';
```

#### 4. valueof æ¼”ç®—å­ã¯ãªã„â€¦â€¦å®Ÿè£…æ–¹æ³•ï¼Ÿ

- å‹ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å¼ã§ã‚‚ã‚­ãƒ¼ã®å‹ã‚’æ¸¡ã™ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å€¤ã®å‹ãŒè¿”ã£ã¦ãã‚‹

```typescript
const permissions = {
  r: 0b100 as const,
  w: 0b010 as const,
  x: 0b001 as const,
};

type PermsChar = keyof typeof permissions;
// (typeof permissions)[PermsNum] ã“ã‚“ãªã‚¤ãƒ¡ãƒ¼ã‚¸
type PermsNum = typeof permissions[PermsChar];

type ValueOf<T> = T[keyof T];
type PermsNum2 = ValueOf<typeof permissions>;  // 1 | 2 | 4
```

#### 5. Const ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆConsst Assertionsï¼‰

- å®šæ•°ã¨ã—ã¦ã®å‹æ³¨é‡ˆã‚’ä»˜ä¸ã™ã‚‹ã‚‚ã®

```typescript
const permissions = {
  r: 0b100 as const,
  w: 0b010 as const,
  x: 0b001 as const,
};

const permissions2 = {
  r: 0b100,
  w: 0b010,
  x: 0b001,
} as const;
```

#### 6. extends ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å‹å¼•æ•°ã®è¡¨ç¾ã«é©ç”¨ã™ã‚‹

- ã“ã“ã§ã® extends ã¯ã€é–¢æ•° override() ã®ç¬¬ 2 å¼•æ•° obj2 ã®å‹ã‚’å®šç¾©ã—ã¦ã„ã‚‹å‹å¼•æ•° U ãŒç¬¬ 1 å¼•æ•° ã®å‹ obj1 ã®å‹ T ã¨åŒã˜ã‹æ‹¡å¼µã—ãŸã‚‚ã®ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã‚’ç¤ºå”†ã™ã‚‹ã‚‚ã®

```typescript
const merge = <T, U extends T>(obj1: T, obj2: U): T & U => ({
  ...obj1,
  ...obj2,
});

override({ a: 1 }, { a: 24, b: 8 });
```

#### 7. çµ„ã¿è¾¼ã¿ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ - å„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å±æ€§ã‚’ã¾ã¨ã‚ã¦å¤‰æ›´ã™ã‚‹é¡ã®ã‚‚ã®

- **Partial<T> - T ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã™ã¹ã¦çœç•¥å¯èƒ½ã«ã™ã‚‹**
- **Required<T> - T ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã™ã¹ã¦å¿…é ˆã«ã™ã‚‹**
- **Readonly<T> - T ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã™ã¹ã¦èª­ã¿å–ã‚Šå°‚ç”¨ã«ã™ã‚‹**

#### 8. çµ„ã¿è¾¼ã¿ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã‹ã‚‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å–æ¨æ´—æ¿¯ã™ã‚‹æ€§è³ªã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹

- **Pick<T,K> - T ã‹ã‚‰ K ãŒæŒ‡å®šã™ã‚‹ã‚­ãƒ¼ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚’æŠœãå‡ºã™**
- **Omit<T,K> - T ã‹ã‚‰ K ãŒæŒ‡å®šã™ã‚‹ã‚­ãƒ¼ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’çœã**

```typescript
type Todo = {
  title: string;
  description: string;
  isDone: boolean;
};

// çµæœã¯ã©ã¡ã‚‰ã‚‚ä¸€ç·’
type PickedTodo = Pick<Todo, 'title' | 'isDone'>;
type OmittedTodo = Omit<Todo, 'description'>;
```

#### 9. çµ„ã¿è¾¼ã¿ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ - åˆ—æŒ™çš„ãªå‹ã‚’åŠ å·¥ã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹

- **Extract<T,U> -T ã‹ã‚‰ U ã®è¦ç´ ã ã‘ã‚’æŠœãå‡ºã™**
- **Exclude<T,U> - T ã‹ã‚‰ U ã®è¦ç´ ã‚’çœã**

```typescript
type Permission = 'r' | 'w' | 'x';

//  RW1 ã¨ RW2 ãŒä¸¡æ–¹ã¨ã‚‚ 'r' | 'w' ã«ãªã‚‹
type RW1 = Extract<Permission, 'r' | 'w'>;
type RW2 = Exclude<Permission, 'x'>;
```

#### 9. çµ„ã¿è¾¼ã¿ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ - ä»»æ„ã®å‹ã‹ã‚‰ null ã¨ undefined ã ã‘ã‚’çœã„ã¦ null éè¨±å®¹ã«ã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹

- **NonNullable<T> - T ã‹ã‚‰ null ã¨ undefined ã‚’çœã**

```typescript
type T1 = NonNullable<string | number | undefined>;
type T2 = NonNullable<number[] | null | undefined>;

// const arr: T1 = undefined; /* compile error */
// const arr: T2 = null;  /* compile error */
```

#### 10. çµ„ã¿è¾¼ã¿ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ - é–¢æ•°ã‚’æ‰±ã†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹

- **Parameters<T> - T ã®å¼•æ•°ã®å‹ã‚’æŠ½å‡ºã—ã€ã‚¿ãƒ—ãƒ«å‹ã§è¿”ã™**
- **ReturnType<T> - T ã®æˆ»ã‚Šå€¤ã®å‹ã‚’è¿”ã™**

```typescript
const f1 = (a: number, b: string) => { console.log(a, b); };
const f2 = () => ({ x: 'hello', y: true });

type P1 = Parameters<typeof f1>; // [number, string]
type P2 = Parameters<typeof f2>; // []
type R1 = ReturnType<typeof f1>; // void
type R2 = ReturnType<typeof f2>; // [x: string, y: boolean]
```

#### 11. é–¢æ•°ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ï¼ˆå¤šé‡å®šç¾©ï¼‰

- åŒã˜åå‰ã®é–¢æ•°ã§ã‚‚å‹ãŒç•°ãªã‚‹å®£è¨€ã‚’é‡è¤‡ã•ã›ã‚‹ã“ã¨ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹

```typescript
class Brooch {
  pentagram = 'Silver Crystal';
}

type Compact = {
  silverCrystal: boolean;
};

class CosmicCompact implements Compact {
  silverCrystal = true;
  cosmicPower = true;
}

class CrisisCompact implements Compact {
  silverCrystal = true;
  moonChalice = true;
}

function transform(): void;
function transform(item: Brooch): void;
function transform(item: Compact): void;
function transform(item?: Brooch | Compact): void {
  if (item instanceof Brooch) {
    console.log('Moon crystal powerğŸ’, make up!!');
  } else if (item instanceof CosmicCompact) {
    console.log('Moon cosmic powerğŸ’–, make up!!!');
  } else if (item instanceof CrisisCompact) {
    console.log('Moon crisisğŸ†, make up!');
  } else if (!item) {
    console.log('Moon prisim powerğŸŒ™, make up!');
  } else {
    console.log('Item is fake...ğŸ˜–');
  }
}
```

ã—ã‹ã—ä¸‹è¨˜ã€è¨˜è¿°ã§ã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã£ã¦ã—ã¾ã†

```bash
$ ts-node
> transform({ pentagram: '***' });
Item is fake...
> const compact = { silverCrystal: false, talisman: [{}, {}, {}] };
> transform(compact);
Item is fake...
```

- TypeScriptã®å‹ã®äº’æ›æ€§ã®åˆ¤å®šã¯ **æ§‹é€ çš„ã‚µãƒ–ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆStructural Subtypingï¼‰** ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã‚‹ãŸã‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‹
- å‹ã®æ§‹é€ ã•ãˆåˆè‡´ã—ã¦ã„ã‚Œã°å‹ãƒã‚§ãƒƒã‚¯ã‚’ãƒ‘ã‚¹ã™ã‚‹
- `pentagram: string` ã•ãˆå‚™ãˆã¦ã„ã‚Œã° `Brooch å‹` ã«ã‚¤ã‚³ãƒ¼ãƒ«ã¨ãªã‚‹

**ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®è¨˜è¿°ã‚’å¼ã«ã—ã¦æ›¸ãæ›ãˆã‚‹**

```typescript
class Brooch {
  pentagram = 'Silver Crystal';
}

type Compact = {
  silverCrystal: boolean;
};

class CosmicCompact implements Compact {
  silverCrystal = true;
  cosmicPower = true;
}

class CrisisCompact implements Compact {
  silverCrystal = true;
  moonChalice = true;
}

type Transform = {
  (): void;
  (item: Brooch): void;
  (item: Compact): void;
};

const transform: Transform = (item?: Brooch | Compact): void => {
  if (item instanceof Brooch) {
    console.log('Moon crystal powerğŸ’, make up!!');
  } else if (item instanceof CosmicCompact) {
    console.log('Moon cosmic powerğŸ’–, make up!!!');
  } else if (item instanceof CrisisCompact) {
    console.log('Moon crisisğŸ†, make up!');
  } else if (!item) {
    console.log('Moon prisim powerğŸŒ™, make up!');
  } else {
    console.log('Item is fake...ğŸ˜–');
  }
};
```

## 4-6. å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã¨å‹ã‚¬ãƒ¼ãƒ‰

#### 1. å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³

- å‹ãŒã‚ã‹ã‚‰ãªã„å€¤ã¯ **å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³** ã‚’ä½¿ç”¨ã—ã¦ TypeScript ã§ã†ã¾ãæ‰±ã†
- as ã®è¨˜è¿°ã¯ `T as (U extends T)` ã¾ãŸã¯ `(T extends U) as U` ã§ã‚ã‚‹æ™‚ã€ã¤ã¾ã‚Š **T ãŒ U ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã§ã‚ã‚‹ã‹ U ãŒ T ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã§ã‚ã‚‹å ´åˆ** ã«ã—ã‹è¨±ã•ã‚Œãªã„

```typescript
const n = 123;

// ä¸‹è¨˜ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹
// Conversion of type 'number' to type 'string' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
// 123 as string ã¯æ›¸ã‘ãªã„ï¼ï¼
const s2 = n as string;
```

- ãŸã ã—ã€`(someValue as unknown) as SomeType` ã¨æ›¸ãã“ã¨ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’é€šã™ã“ã¨ãŒã§ãã¦ã—ã¾ã†

#### 2. å‹ã‚¬ãƒ¼ãƒ‰ï¼ˆType Guardsï¼‰

- ã‚ã‚‹ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ã®å‹ã‚’ä¿è¨¼ã™ã‚‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†å¼ã®ã“ã¨ã‚’ **å‹ã‚¬ãƒ¼ãƒ‰** ã¨ã„ã†
- ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
    - ãŸã ã— `typeof null` ã¯ 'object' ãŒè¿”ã£ã¦ãã¦ã—ã¾ã†ãŸã‚ **null ã®å ´åˆã‚‚ä½¿ãˆãªã„**

```typescript
const foo: unknown = '1,2,3,4';

if (typeof foo === 'string') {
  console.log(foo.split(','));
}
```

- ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãªã‚‰ `instanceof` ãŒä½¿ãˆã‚‹

```typescript
class Base { common = 'common'; }
class Foo extends Base { foo = () => { console.log('foo'); } }
class Bar extends Base { bar = () => { console.log('bar'); } }

const doDivide = (arg: Foo | Bar) => {
  if (arg instanceof Foo) {
    arg.foo();
//  arg.bar();  /* compile error */
  } else {
    arg.bar();
//  arg.foo();  /* compile error */
  }

  console.log(arg.common);
};
```

#### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®å‹ã‚¬ãƒ¼ãƒ‰ï¼ˆUser-Defined Type Guardsï¼‰

- ãŸã ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ä¸Šè¨˜ï¼’ã¤ã®ã‚„ã‚Šæ–¹ã¯ä½¿ç”¨ã§ããªã„ãŸã‚ã€è‡ªå‰ã§å‹ã‚’çµã‚Šè¾¼ã‚€ã—ãã¿ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãã‚Œã‚’ **ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®å‹ã‚¬ãƒ¼ãƒ‰** ã¨å‘¼ã¶

```typescript
type Address = { zipcode: string; town: string };
type User = { username: string; address: Address };

const isUser = (arg: unknown): arg is User => {
  const u = arg as User;

  return (
    typeof u?.username === 'string' &&
    typeof u?.address?.zipcode === 'string' &&
    typeof u?.address?.town === 'string'
  );
};

const u1: unknown = JSON.parse('{}');
const u2: unknown = JSON.parse('{ "username": "patty", "address": "Maple Town" }');
const u3: unknown = JSON.parse(
  '{ "username": "patty", "address": { "zipcode": "111", "town": "Maple Town" } }',
);
[u1, u2, u3].forEach((u) => {
  if (isUser(u)) {
    console.log(`${u.username} lives in ${u.address.town}`);
  } else {
    console.log("It's not User");
//  console.log(`${u.username} lives in ${u.address.town}`);  /* compile error */
  }
})
```

- `arg is User` ã¯ **å‹è¿°èªï¼ˆType Predicateï¼‰** ã¨ã„ã†è¡¨ç¾ã§ã€ã“ã®é–¢æ•°ãŒ true ã‚’è¿”ã™å ´åˆã«å¼•æ•° arg ã®å‹ãŒ User ã§ã‚ã‚‹ã“ã¨ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ç¤ºå”†ã•ã‚Œã‚‹

## 4â€“7. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨å‹å®šç¾©

#### 1. ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«æŒ‡å®šã™ã‚‹ãƒ‘ã‚¹ã§ã®æ‹¡å¼µå­ã®æ‰±ã„

- TypeScriptã§ã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®éš›ã«èª­ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ã‚’çœç•¥ã§ãã‚‹ã€ã¨ã„ã†ã‚ˆã‚Šæ‹¡å¼µå­ã‚’æ›¸ãã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

```typescript
import bar from './bar';
```

- ä¸Šè¨˜ã®ã‚ˆã†ãªè¨˜è¿°ã®æ™‚ã®TypeScriptã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¢ç´¢
- ï¼‘ä»¶ã‚‚ãƒ’ãƒƒãƒˆã—ãªã‹ã£ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
    - 1. src/bar.ts
    - 2. src/bar.tsx
    - 3. src/bar.d.ts
    - 4. src/bar/package.json ã® types ã¾ãŸã¯ typings ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
    - 5. src/bar/index.ts
    - 6. src/bar/index.tsx
    - 7. src/bar/index.d.ts

#### 2. import, export ã«ã‚‚å‹ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã®æŒ™å‹•ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹

- ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚„å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã„ã£ãŸã‚‚ã®ã‚‚ import, exeport ã®å¯¾è±¡ã«ãªã‚‹
- é€šå¸¸ã®æ§‹æ–‡ã® import ã¨ export ã§ã¯ã€å‹ã‚‚å¤‰æ•°ã‚„é–¢æ•°ã¨åŒºåˆ¥ãªãåŒåˆ—ã«æ‰±ã‚ã‚Œã‚‹

```typescript
type Species = 'rabbit' | 'bear' | 'fox' | 'dog';

interface Resident {
  name: string;
  age: number;
  species: Species;
}

const isCanine = (resident: Resident): boolean =>
  ['dog', 'fox'].includes(resident.species);

export { Species, Resident, isCanine };
```

#### 3. å¤‰æ•°å®£è¨€ç©ºé–“ï¼ˆVariable Declaration Spaceï¼‰ã€å‹å®£è¨€ç©ºé–“ï¼ˆType Declaration Spaceï¼‰

- åŒã˜åå‰ç©ºé–“ã®ä¸­ã« **å¤‰æ•°å®£è¨€ç©ºé–“ã€å‹å®£è¨€ç©ºé–“** ãŒå­˜åœ¨ã—ã¦ã„ã¦ã€åå‰ã®ç®¡ç†ãŒåˆ¥ã€…ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€ **å¤‰æ•°ã‚„å‹ã§åŒä¸€ã®åå‰ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹**
- å‹ã¨åŒã˜åå‰ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã™ã‚‹ã“ã¨ã‚’ **ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆCombinationï¼‰** ã¨å‘¼ã¶
- å‹ã¨åŒã˜åå‰ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã™ã‚‹ã¨ã„ã†ã®ã¯ã€çµ„ã¿è¾¼ã¿ã¨åŒã˜ã“ã¨ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ï¼ˆã‚¯ãƒ©ã‚¹ã¨ã‹ï¼‰
  - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å‹ã¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°ã®å®£è¨€ã‚’åŒã˜åå‰ã§åŒæ™‚ã«ã‚„ã£ã¦ã„ã‚‹å¥´
  - ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹æ™‚ã¯æš—é»™ã®å†…ã«å‹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸¡æ–¹ã‚’åŒæ™‚ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹

**exportã®ä¾‹**

```typescript
const rate: { [unit: string]: number } = {
  USD: 1,
  EUR: 0.9,
  JPY: 108,
  GBP: 0.8,
};

type Unit = keyof typeof rate;
type Currency = {
  unit: Unit;
  amount: number;
};

const Currency = {
  exchange: (currency: Currency, unit: Unit): Currency => {
    const amount = currency.amount / rate[currency.unit] * rate[unit];

    return { unit, amount };
  },
};

export { Currency };
```

**importã®ä¾‹**

```typescript
import { Currency } from './currency-export';

const dollars: Currency = {
  unit: 'USD',
  amount: 100,
};

console.log(dollars);                           // { unit: "USD", amount: 100 }
console.log(Currency.exchange(dollars, 'JPY')); // { unit: "JPY", amount: 10800 }
```

#### 4. å‹ã®ã¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆType-Only Importsï¼‰ã€å‹ã®ã¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆType-Only Exportsï¼‰

- åŒã˜åå‰ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸå‹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‹ã ã‘ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸã‚Šã€æœ€åˆã‹ã‚‰ã‚ãˆã¦å‹ã ã‘ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸã‚Šã§ãã‚‹æ©Ÿèƒ½
- ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹æ™‚ã€`import { Foo } from 'bar'` ã®ã‚ˆã†ã«æ›¸ã
- å‹ã ã‘ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹æ™‚ã€`import type { Foo } from 'bar'` ã®ã‚ˆã†ã«æ›¸ã

```typescript
type Species = 'rabbit' | 'bear' | 'fox' | 'dog';

class Resident {
  name = '';
  age = 0;
  species: Species | null = null;
}

export type { Species, Resident };
```

Resident ã‚¯ãƒ©ã‚¹ã‚’å‹ã ã‘ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹

```typescript
import { Resident } from './resident';

// const resident = new Resident();  /* compile error */
const patty: Resident = {
  name: 'Patty Rabbit',
  age: 8,
  species: 'rabbit',
};
```

#### 5. JavaScriptã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’TypeScriptã§èª­ã¿è¾¼ã‚€

- JavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ JavaScriptã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿ã®ãƒ•ã‚¡ã‚¤ãƒ«ã€å®£è¨€ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆDeclaration Fileï¼‰ã¨ã„ã†TypeScriptã®å‹æƒ…å ±ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã—ã¦é…å¸ƒã—ã¦ã„ã‚‹
    - å®£è¨€ãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢ã—ã¦ã¯ TypeScript ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã£ã¦ã‚‚ä¿®æ­£ãŒå¿…è¦ã«ãªã‚‹ã“ã¨ã¯ã»ã¨ã‚“ã©ãªã„

**CommonJSå½¢å¼ã®ã‚‚ã®ã‚’èª­ã¿è¾¼ã‚€æ–¹æ³•**

```json
{
  "compilerOptions": {
    "target": "es5", 
    "lib": [
      "dom",
      "es2015" 
    ],
    "strict": true,
    "module": "commonjs", 
    "moduleResolution": "node", 
    "declaration": true
  } 
}
```

- tsc ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ã‚ˆã‚ŠJavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ **xxxxxx.d.ts** ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œã‚‰ã‚Œã‚‹
- `xxxxxx.d.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã§ **declare** ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹ï¼ˆå¤‰æ•°ã€é–¢æ•°ãŒã©ã†ã„ã†å‹ã§å­˜åœ¨ã—ã¦ã„ã‚‹ã®ã‹ãªã©ã®æƒ…å ±ã‚’ TypeScript ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«æ•™ãˆã¦ã‚ã’ã¦ã„ã‚‹ï¼‰
- æ—¢å­˜ã® JavaScript ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å‹æƒ…å ±ã‚’ä»˜åŠ ã™ã‚‹å½¢ã®å®£è¨€ï¼ˆdeclare ã§å®£è¨€ï¼‰ã®ã“ã¨ã‚’ã€é€šå¸¸ã®å®£è¨€ã¨åŒºåˆ¥ã—ã¦ **ã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆå®£è¨€ï¼ˆAmbient Declarationsï¼‰**

#### 6. å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¢ç´¢æ–¹æ³• - JavaScript ã¨åŒã˜éšå±¤ã«é…ç½®

- [ky](https://github.com/sindresorhus/ky) ã¨ã„ã†ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã“ã®å½¢å¼ã‚’å–ã£ã¦ã„ã‚‹

```
node_modules/ky
â”œâ”€ index.d.ts
â”œâ”€ index.js
â”œâ”€ license
â”œâ”€ package.json
â”œâ”€ readme.md
â”œâ”€ umd.d.ts
â””â”€ umd.js
```

#### 7. å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¢ç´¢æ–¹æ³• - package.json ã«å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹

- [Immer](https://immerjs.github.io/immer/docs/introduction) ã¨ã„ã†ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ„ãƒªãƒ¼ã‚’æ‰±ã†ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã“ã®å½¢å¼ã‚’ã¨ã£ã¦ã„ã‚‹


```json
{
  "name": "immer",
  "version": "4.0.2",
  "description": "Create your next immutable state by mutating the current one", "main": "dist/immer.js",
  "umd:main": "dist/immer.umd.js",
  "unpkg": "dist/immer.umd.js",
  "jsdelivr": "dist/immer.umd.js",
  "module": "dist/immer.module.js",
  "jsnext:main": "dist/immer.module.js",
  "react-native": "dist/immer.module.js",
  "types": "./dist/immer.d.ts",
  ãƒ»
  ãƒ»
  ãƒ»
```

#### 8. å…¬å¼ãŒé…å¸ƒã—ã¦ã„ãªã„å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã©ã†ã—ãŸã‚‰ã„ã„ã®ï¼Ÿ

- [DefinitelyTyped](https://definitelytyped.org/) ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šãã“ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚Œã°ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã¨è‰¯ã„
    - å‘½åã¯ `@types` ãŒå§‹ã¾ã£ã¦ã„ã‚‹
- æ¢ã™æ™‚ã¯ Microsoft ã® [TypeSearch](https://www.typescriptlang.org/dt/search?search=) ã§æ¤œç´¢ã™ã‚‹ã¨è‰¯ã„

#### 9. å…¬å¼ã‚‚DefinitelyTypedã§ã‚‚é…å¸ƒã•ã‚Œã¦ã„ãªã„å ´åˆ

- é‡è‰¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚„è‡ªä½œã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å°å…¥ã™ã‚‹ã“ã¨ã«ãªã‚‹
- `src/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª` ã«é©å½“ãªåå‰ã§ `.d.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã

ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ä½œæˆã™ã‚‹

```typescript
// src/types.d.ts ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
// awesomelib ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã£ãŸå ´åˆ
declare module awesomelib {
  export type Amazing = { ... };
  declare function fabulous(arg: Amazing): void;
  ãƒ»
  ãƒ»
  ãƒ»
  export default fabulous;
```

`import fabulours from 'awesomelib'` ã®ã‚ˆã†ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹

#### 10. å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®å„ªå…ˆåº¦

- 1. **ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å‹å®£è¨€**
- 2. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã«æŒã£ã¦ã„ã‚‹å‹ãƒ•ã‚¡ã‚¤ãƒ«**
- 3. **node_modules/@types/**

## 4-8 TypeScriptã®ç’°å¢ƒè¨­å®š

#### 1. tsc 

- TypeScript ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚³ãƒãƒ³ãƒ‰
- ts-node ã§ç›´æ¥ TypeScript ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ãŸæ™‚ã¯ tsc ã‚³ãƒãƒ³ãƒ‰ãŒå†…éƒ¨ã§èµ°ã£ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå†…éƒ¨ã§è¡Œã‚ã‚Œã¦ã„ã‚‹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰è¦ªãƒ‡ã‚£ã‚¹ãƒ¬ã‚¯ãƒˆã„ã¸ã•ã‹ã®ã¼ã£ã¦ã„ã£ã¦æœ€åˆã«è¦‹ã¤ã‹ã£ãŸ tsconfig.json ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã€ãã“ã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹è¨­å®šãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦æœ‰åŠ¹ã«ãªã‚‹

#### 2. 
